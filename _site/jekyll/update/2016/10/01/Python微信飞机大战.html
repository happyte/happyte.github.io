<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Python微信飞机大战</title> <meta name="description" content="pygame实现微信飞机大战"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="http://localhost:4000/jekyll/update/2016/10/01/Python%E5%BE%AE%E4%BF%A1%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98.html"> <link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml"> <script src="/assets/js/modernizr.js"></script> </head> <body"> <main class="wrapper"> <header class="site-header"> <a href="#navbar" id="menu-burger" class="menu-burger">Menu <span class="nav-icon"></span> <svg x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54"> <circle fill="transparent" stroke="#000000" stroke-width="1" cx="27" cy="27" r="25" stroke-dasharray="157 157" stroke-dashoffset="157"></circle> </svg> </a> <div id="navbar" class="navbar"> <div class="navigation-wrapper"> <div class="half-block"> <h2>Navigation</h2> <nav> <ul class="primary-nav"> <li><a href="/">Home</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/about">About</a></li> <li><a href="https://github.com/answershuto" ><i class="icon icon-github"></i> Github</a></li> </ul> </nav> </div> </div> </div> </header> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header intro"> <div class="intro-in"> <h1 class="post-title" itemprop="name headline">Python微信飞机大战</h1> <p class="post-meta"><time datetime="2016-10-01T20:52:00+08:00" itemprop="datePublished">Oct 1, 2016</time></p> </div> </header> <div class="post-content container" itemprop="articleBody"> <h1 id="基础类的构建">基础类的构建</h1> <h2 id="导弹类">导弹类</h2> <ul> <li>1.导弹是从飞机上发射的(无论是玩家的飞机还是敌机),导弹的位置需要根据飞机的位置确定，还需要根据是玩家飞机还是敌机确定导弹的图片名和发射方向，因此需要传入图片名和位置参数。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#定义导弹类</span>
<span class="k">class</span> <span class="nc">Bullet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="s">"""Bullet"""</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">planeName</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">planeName</span> <span class="o">==</span> <span class="s">'enemy'</span><span class="p">:</span>        <span class="c">#敌机导弹向下打</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">imageName</span> <span class="o">=</span> <span class="s">'Resources/bullet-3.png'</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="s">'down'</span>
		<span class="k">elif</span> <span class="n">planeName</span> <span class="o">==</span> <span class="s">'hero'</span><span class="p">:</span>       <span class="c">#英雄飞机导弹向上打</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">imageName</span> <span class="o">=</span> <span class="s">'Resources/bullet-1.png'</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="s">'up'</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imageName</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</code></pre></div> <p>pygame框架加载图片为图像函数为:<code class="highlighter-rouge">pygame.image.load(image).convert()</code>,传入的参数是图片的相对路径。</p> <ul> <li>2.描绘出导弹的位置，导弹并且需要在初始化的self.x和self.y基础上移动位置,位置是在屏幕上描绘的，需要传入屏幕参数。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">screen</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s">'down'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">8</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s">'up'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">8</span>
		<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
</code></pre></div> <p>pygame显示图片函数为:</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code>   <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
   <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</code></pre></div> <p>第一个参数为加载的图像，第二个参数为左上角坐标。两个函数是配合使用的，需要第二个函数去刷新界面。</p> <h2 id="飞机类">飞机类</h2> <ul> <li>1.Plane类是接下来要创建的玩家类Hero和敌机类Enemy的基类。基类把两者共同的属性和方法定义出来，方便子类继承。飞机要发射导弹，有一定的发射间隔，因此定义一个对象属性<code class="highlighter-rouge">self.bulletSleepTime</code>。还需要一个列表存储导弹，定义一个对象属性为空列表<code class="highlighter-rouge">self.bulletList</code>。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#定义一个飞机基类		</span>
<span class="k">class</span> <span class="nc">Plane</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="s">"""Plane"""</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#导弹间隔发射时间1s</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bulletSleepTime</span> <span class="o">=</span> <span class="mf">0.3</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lastShootTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
		<span class="c">#存储导弹列表</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bulletList</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div> <ul> <li>2.在初始化的时候我们定义了导弹的发射间隔时间，大于间隔时间的话我们就往定义的列表中添加导弹对象，因为我现在只想让玩家飞机发射子弹，因此初始化导弹对象特意往self.x加了36(是玩家飞机72x72图片宽度的一半)。让导弹在玩家飞机的正中间开始显示。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">shoot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">lastShootTime</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">bulletSleepTime</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">bulletList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Bullet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planeName</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="mi">36</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">lastShootTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</code></pre></div> <ul> <li>3.描绘出飞机的位置</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#描绘飞机</span>
	<span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">screen</span><span class="p">):</span>
		<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
</code></pre></div> <h1 id="继承类的构建">继承类的构建</h1> <h2 id="玩家飞机类">玩家飞机类</h2> <ul> <li>1.在飞机基类中我们定义了一些共同的对象属性，不同的对象属性有图像和原始位置，而且玩家飞机类对象还想拥有基类对象的属性，所以需要调用<code class="highlighter-rouge">Plane.__init__(self)</code>函数，通过这个函数就拥有了Plane基类的对象属性bulletSleepTime、lastShootTime、bulletList。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#玩家飞机类，继承基类</span>
<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">Plane</span><span class="p">):</span>
	<span class="s">"""Hero"""</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">Plane</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">planeImageName</span> <span class="o">=</span> <span class="s">'Resources/hero.png'</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">planeImageName</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
		<span class="c">#玩家原始位置</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">200</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">600</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">planeName</span> <span class="o">=</span> <span class="s">'hero'</span>
</code></pre></div> <ul> <li>2.玩家飞机通过键盘的上下左右控制飞机的位置</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#键盘控制自己飞机</span>
	<span class="k">def</span> <span class="nf">keyHandle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">keyValue</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">keyValue</span> <span class="o">==</span> <span class="s">'left'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="mi">50</span>
		<span class="k">elif</span> <span class="n">keyValue</span> <span class="o">==</span> <span class="s">'right'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">50</span>
		<span class="k">elif</span> <span class="n">keyValue</span> <span class="o">==</span> <span class="s">'up'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">50</span>
		<span class="k">elif</span> <span class="n">keyValue</span> <span class="o">==</span> <span class="s">'down'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">50</span>
</code></pre></div> <h2 id="敌人飞机类">敌人飞机类</h2> <ul> <li>1.敌人飞机类中还多了速度对象属性，考虑到随着游戏难度的增加，敌人飞机速度越来越快，这个参数需要外界传入。而且敌人飞机有小中大三种类型，是随机的，起始的位置x轴也是随机的，y轴固定从最上方开始。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code> <span class="c">#定义敌人飞机类</span>
<span class="k">class</span> <span class="nc">Enemy</span><span class="p">(</span><span class="n">Plane</span><span class="p">):</span>
	<span class="s">"""docstring for Enemy"""</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">speed</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">Enemy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
		<span class="n">randomImageNum</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
		<span class="n">planeImageName</span> <span class="o">=</span> <span class="s">'Resources/enemy-'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomImageNum</span><span class="p">)</span> <span class="o">+</span> <span class="s">'.png'</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">planeImageName</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
		<span class="c">#敌人飞机原始位置</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>    <span class="c">#敌机出现的位置任意</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">planeName</span> <span class="o">=</span> <span class="s">'enemy'</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="s">'down'</span>     <span class="c">#用英文表示</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="n">speed</span>          <span class="c">#移动速度,这个参数现在需要传入</span>
</code></pre></div> <p>用到了随机数函数，需要导入random模块<code class="highlighter-rouge">random.randint(1,3)</code>。</p> <p>其中用到了<code class="highlighter-rouge">super(Enemy,self).__init__()</code>与玩家类中的<code class="highlighter-rouge">Plane.__init__(self)</code>效果是相同的。direction对象属性可以忽略,现在没有用到。</p> <ul> <li>2.敌人的飞机不断往下掉，改变self.y,其实不用判断，direction没有用到</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s">'down'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span>     <span class="c">#飞机不断往下掉</span>
</code></pre></div> <h1 id="游戏初始化类封装功能">游戏初始化类(封装功能)</h1> <ul> <li>1.GameInit类创建了几个类属性，<code class="highlighter-rouge">g_enemyList=[]</code>列表用于存储敌人飞机对象，初始化玩家对象<code class="highlighter-rouge">hero=object</code>，object是元类，和用于统计玩家分数的属性score</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code>   <span class="c">#类属性</span>
   <span class="n">gameLevel</span> <span class="o">=</span> <span class="mi">1</span>       <span class="c">#简单模式</span>
   <span class="n">g_ememyList</span> <span class="o">=</span> <span class="p">[]</span>    <span class="c">#前面加上g类似全局变量</span>
   <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>           <span class="c">#用于统计分数</span>
   <span class="n">hero</span> <span class="o">=</span> <span class="nb">object</span>
</code></pre></div> <ul> <li> <p>2.接下来定义了几个类方法和静态方法，用于封装功能，在主函数里调用的都是这些类方法和静态方法</p> <ul> <li>往敌机列表中添加敌机对象,忽略下我的代码英语好像打错了</li> </ul> </li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">createEnemy</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="n">speed</span><span class="p">):</span>
		<span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Enemy</span><span class="p">(</span><span class="n">speed</span><span class="p">))</span>
</code></pre></div> <ul> <li>创建玩家飞机对象</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">createHero</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="n">cls</span><span class="o">.</span><span class="n">hero</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">()</span>
</code></pre></div> <ul> <li>游戏初始化</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">gameInit</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="n">cls</span><span class="o">.</span><span class="n">createHero</span><span class="p">()</span>
</code></pre></div> <ul> <li>玩家飞机对象处理键盘操作，在玩家飞机类中已经定义了键盘处理函数，这里再封装一层</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">heroPlaneKey</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="n">keyValue</span><span class="p">):</span>
		<span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">keyHandle</span><span class="p">(</span><span class="n">keyValue</span><span class="p">)</span>
</code></pre></div> <ul> <li>更新敌人飞机位置，敌人飞机对象都在<code class="highlighter-rouge">g_enemyList</code>列表中</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">setXY</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="p">:</span>
			<span class="n">i</span><span class="o">.</span><span class="n">move</span><span class="p">()</span>
</code></pre></div> <ul> <li>有3种类型的对象需要描绘，玩家飞机对象，敌人飞机对象和导弹，这个函数就是用来描绘这些对象，其中导弹和敌机需要判断哪些对象超出屏幕从列表中删除,这里用了del函数，记录下索引值并从列表中删除，同样也可以用pop函数,这里的j为索引值</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code> <span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="n">screen</span><span class="p">):</span>
		<span class="n">delPlaneList</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="p">:</span>
			<span class="n">i</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>   <span class="c">#画出敌机</span>
			<span class="c">#敌机超过屏幕就从列表中删除</span>
			<span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">680</span><span class="p">:</span>
				<span class="n">delPlaneList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
			<span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">delPlaneList</span><span class="p">:</span>
			<span class="k">del</span> <span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>


		<span class="n">delBulletList</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>    <span class="c">#画出英雄飞机位置</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">bulletList</span><span class="p">:</span>
			<span class="c">#描绘英雄飞机的子弹，超出window从列表中删除</span>
			<span class="n">i</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
				<span class="n">delBulletList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
			<span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="c">#删除加入到delBulletList中的导弹索引,是同步的</span>
		<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">delBulletList</span><span class="p">:</span>
			<span class="k">del</span> <span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">bulletList</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</code></pre></div> <ul> <li>玩家飞机对象发射子弹，同时也要判断打中了敌机就让敌机对象和和子弹对象同时从列表中删除。通过<code class="highlighter-rouge">pygame.Rect(self.image.get_rect())</code>获得矩形的值，但是只获得了图像的width和height两个属性，前两个属性left和top都为0，因此还需要设置这两个属性，然后通过collidetect判断两个矩形是否有相交处，其中索引值enemyIndex和bulletIndex需要仔细分析下</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#自己飞机发射子弹</span>
	<span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">shoot</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">shoot</span><span class="p">()</span>
		<span class="c">#子弹打到敌机让敌机从列表中消失</span>
		<span class="n">ememyIndex</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="p">:</span>
			<span class="n">enemyRect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">())</span>
			<span class="n">enemyRect</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span>
			<span class="n">enemyRect</span><span class="o">.</span><span class="n">top</span>  <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span>
			<span class="n">bulletIndex</span> <span class="o">=</span> <span class="mi">0</span>
			<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">bulletList</span><span class="p">:</span>
				<span class="n">bulletRect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">())</span>
				<span class="n">bulletRect</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">x</span>
				<span class="n">bulletRect</span><span class="o">.</span><span class="n">top</span>  <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">y</span>
				<span class="k">if</span> <span class="n">enemyRect</span><span class="o">.</span><span class="n">colliderect</span><span class="p">(</span><span class="n">bulletRect</span><span class="p">):</span>
					<span class="c">#判断敌机的宽度或者高度，来知道打中哪种类型的敌机</span>
					<span class="k">if</span> <span class="n">enemyRect</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="mi">39</span><span class="p">:</span>
						<span class="n">cls</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="mi">1000</span>     <span class="c">#小中大飞机分别100,500,1000分</span>
					<span class="k">elif</span> <span class="n">enemyRect</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="mi">60</span><span class="p">:</span>
						<span class="n">cls</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="mi">5000</span>
					<span class="k">elif</span> <span class="n">enemyRect</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="mi">78</span><span class="p">:</span>
						<span class="n">cls</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="mi">10000</span>
					<span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ememyIndex</span><span class="p">)</span>        <span class="c">#敌机删除</span>
					<span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">bulletList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">bulletIndex</span><span class="p">)</span>   <span class="c">#打中的子弹删除</span>
				<span class="n">bulletIndex</span> <span class="o">+=</span> <span class="mi">1</span>
			<span class="n">ememyIndex</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div> <ul> <li>判断玩家飞机是否与敌机相撞判断游戏是否结束</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#判断游戏是否结束</span>
	<span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">gameover</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="n">heroRect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">())</span>
		<span class="n">heroRect</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">x</span>
		<span class="n">heroRect</span><span class="o">.</span><span class="n">top</span>  <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">hero</span><span class="o">.</span><span class="n">y</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">g_ememyList</span><span class="p">:</span>
			<span class="n">enemyRect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">())</span>
			<span class="n">enemyRect</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span>
			<span class="n">enemyRect</span><span class="o">.</span><span class="n">top</span>  <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span>
			<span class="k">if</span> <span class="n">heroRect</span><span class="o">.</span><span class="n">colliderect</span><span class="p">(</span><span class="n">enemyRect</span><span class="p">):</span>
				<span class="k">return</span> <span class="bp">True</span>
		<span class="k">return</span> <span class="bp">False</span>
</code></pre></div> <ul> <li> <p>3.几个静态方法，静态方法不需要cls这个参数,通过类和实例都可以调用</p> </li> <li> <p>退出整个程序</p> </li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code> <span class="nd">@staticmethod</span>
	<span class="k">def</span> <span class="nf">terminate</span><span class="p">():</span>
		<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
		<span class="n">sys</span><span class="o">.</span><span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div> <ul> <li>进入游戏后可以按space键停止游戏，其实就是就是个死循坏，按键按下后跳出函数</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@staticmethod</span>
	<span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span><span class="n">image</span><span class="p">):</span>
		<span class="n">surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">image</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
		<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
		<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
				<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
					<span class="n">cls</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
				<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KEYDOWN</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_SPACE</span><span class="p">:</span>
						<span class="k">return</span>
</code></pre></div> <ul> <li>游戏开始后和结束后把分数显示出来,第一个参数是分数，第二个参数是通过pygame的字体库创建出来的，例如<code class="highlighter-rouge">font = pygame.font.SysFont(None,64)</code>,参数分别为字体样式和大小，可以选择字体样式例如arial、simsun(宋体)，第三个参数是屏幕，第四和第五个参数是字体显示的left和top值。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="nd">@staticmethod</span>
	<span class="k">def</span> <span class="nf">drawText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">font</span><span class="p">,</span><span class="n">surface</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
		<span class="c">#参数1：显示的内容 |参数2：是否开抗锯齿，True平滑一点|参数3：字体颜色|参数4：字体背景颜色</span>
		<span class="n">content</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="bp">False</span><span class="p">,(</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
		<span class="n">contentRect</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
		<span class="n">contentRect</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">x</span>
		<span class="n">contentRect</span><span class="o">.</span><span class="n">top</span>  <span class="o">=</span> <span class="n">y</span>
		<span class="n">surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="n">contentRect</span><span class="p">)</span>  
</code></pre></div> <h1 id="主函数">主函数</h1> <ul> <li>1.运行一个模块，有<code class="highlighter-rouge">if __name__ == 'main':</code>标识，会直接运行里面的代码。第一步初始化pygame库，调用<code class="highlighter-rouge">pygame.init()</code>,第二步创建一个窗口与背景图拍呢一样大:<code class="highlighter-rouge">screen = pygame.display.set_mode((ScreenWidth,ScreenHeight),0,32)</code>,然后可以设置窗口标题:<code class="highlighter-rouge">pygame.display.set_caption('飞机大战')</code>，第三步做一些初始化常量设置。其中纪录了游戏开始的时间，因为按照我的思想游戏开始后难度会逐渐增加，我是通过时间来增加难度的,启动时显示start图片，直到Enter键按下才进入游戏。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="c">#初始化pygame</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="c">#创建一个窗口与背景图片一样大</span>
    <span class="n">ScreenWidth</span><span class="p">,</span><span class="n">ScreenHeight</span> <span class="o">=</span> <span class="mi">460</span><span class="p">,</span><span class="mi">680</span>
    <span class="n">easyEnemySleepTime</span> <span class="o">=</span> <span class="mi">1</span>      <span class="c">#简单模式下每隔1s创建新的敌机</span>
    <span class="n">middleEnemySleepTime</span> <span class="o">=</span> <span class="mf">0.5</span> 
    <span class="n">hardEnemySleepTime</span> <span class="o">=</span> <span class="mf">0.25</span>
    <span class="n">lastEnemyTime</span>  <span class="o">=</span> <span class="mi">0</span>
    <span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">ScreenWidth</span><span class="p">,</span><span class="n">ScreenHeight</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'飞机大战'</span><span class="p">)</span>
    <span class="c">#参数1：字体类型，例如"arial"  参数2：字体大小</span>
    <span class="n">font</span>  <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SysFont</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="mi">64</span><span class="p">)</span>
    <span class="n">font1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SysFont</span><span class="p">(</span><span class="s">"arial"</span><span class="p">,</span><span class="mi">24</span><span class="p">)</span>
    <span class="c">#记录游戏开始的时间</span>
    <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="c">#背景图片加载并转换成图像</span>
    <span class="n">background</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">"Resources/bg_01.png"</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>   <span class="c">#背景图片</span>
    <span class="n">gameover</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">"Resources/gameover.png"</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>  <span class="c">#游戏结束图片</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">"Resources/startone.png"</span><span class="p">)</span>               <span class="c">#游戏开始图片</span>
    <span class="n">gamePauseIcon</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">"Resources/Pause.png"</span><span class="p">)</span>
    <span class="n">gameStartIcon</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">"Resources/Start.png"</span><span class="p">)</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">start</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>       <span class="c">#开始显示启动图片，直到有Enter键按下才会开始</span>
    <span class="n">GameInit</span><span class="o">.</span><span class="n">waitForKeyPress</span><span class="p">()</span>
    <span class="c">#初始化</span>
    <span class="n">GameInit</span><span class="o">.</span><span class="n">gameInit</span><span class="p">()</span>
</code></pre></div> <ul> <li>2.进入while循坏后，调用游戏初始化类封装好的函数，通过时间间隔interval选定游戏困难模式，通过改变敌机刷新的时间和敌机的速度增加难度，游戏结束后，再次按下Enter按键退出程序。这里存在一个bug,一旦游戏进行过程中按下Space暂停游戏，interval时间间隔仍然再计算(按道理应该让时间暂停)，再次按下Space恢复游戏后，当前模式设定时间减少了或者进入更困难模式了。</li> </ul> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    	<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>    <span class="c">#不断覆盖，否则在背景上的图片会重叠</span>
    	<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">gameStartIcon</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    	<span class="n">GameInit</span><span class="o">.</span><span class="n">drawText</span><span class="p">(</span><span class="s">'score:</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="p">(</span><span class="n">GameInit</span><span class="o">.</span><span class="n">score</span><span class="p">),</span><span class="n">font1</span><span class="p">,</span><span class="n">screen</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
    	<span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
    		<span class="c">#print(event.type)</span>
    		<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
    			<span class="n">GameInit</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    		<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">KEYDOWN</span><span class="p">:</span>
    			<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_LEFT</span><span class="p">:</span>
    				<span class="n">GameInit</span><span class="o">.</span><span class="n">heroPlaneKey</span><span class="p">(</span><span class="s">'left'</span><span class="p">)</span>
    			<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_RIGHT</span><span class="p">:</span>
    				<span class="n">GameInit</span><span class="o">.</span><span class="n">heroPlaneKey</span><span class="p">(</span><span class="s">'right'</span><span class="p">)</span>
    			<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_UP</span><span class="p">:</span>
    				<span class="n">GameInit</span><span class="o">.</span><span class="n">heroPlaneKey</span><span class="p">(</span><span class="s">'up'</span><span class="p">)</span>
    			<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_DOWN</span><span class="p">:</span>
    				<span class="n">GameInit</span><span class="o">.</span><span class="n">heroPlaneKey</span><span class="p">(</span><span class="s">'down'</span><span class="p">)</span>
    			<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_SPACE</span><span class="p">:</span>
    				<span class="n">GameInit</span><span class="o">.</span><span class="n">pause</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">gamePauseIcon</span><span class="p">)</span> <span class="c">#难度选择方面有bug.因为时间一直继续</span>
    	<span class="n">interval</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span>
    	<span class="c"># easy模式</span>
    	<span class="k">if</span> <span class="n">interval</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    		<span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">lastEnemyTime</span> <span class="o">&gt;=</span> <span class="n">easyEnemySleepTime</span><span class="p">:</span>
    			<span class="n">GameInit</span><span class="o">.</span><span class="n">createEnemy</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>   <span class="c">#传入的参数是speed</span>
    			<span class="n">lastEnemyTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    	<span class="c"># middle模式</span>
    	<span class="k">elif</span> <span class="n">interval</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">interval</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
    		<span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">lastEnemyTime</span> <span class="o">&gt;=</span> <span class="n">middleEnemySleepTime</span><span class="p">:</span>
    			<span class="n">GameInit</span><span class="o">.</span><span class="n">createEnemy</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    			<span class="n">lastEnemyTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    	<span class="c"># hard模式</span>
    	<span class="k">elif</span> <span class="n">interval</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">:</span>
    		<span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">lastEnemyTime</span> <span class="o">&gt;=</span> <span class="n">hardEnemySleepTime</span><span class="p">:</span>
    			<span class="n">GameInit</span><span class="o">.</span><span class="n">createEnemy</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
    			<span class="n">lastEnemyTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    	<span class="n">GameInit</span><span class="o">.</span><span class="n">shoot</span><span class="p">()</span>
    	<span class="n">GameInit</span><span class="o">.</span><span class="n">setXY</span><span class="p">()</span>
    	<span class="n">GameInit</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>    <span class="c">#描绘类的位置</span>
    	<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c">#不断更新图片</span>
    	<span class="k">if</span> <span class="n">GameInit</span><span class="o">.</span><span class="n">gameover</span><span class="p">():</span>
    		<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>        <span class="c">#睡1s时间,让玩家看到与敌机相撞的画面</span>
    		<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">gameover</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    		<span class="n">GameInit</span><span class="o">.</span><span class="n">drawText</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="p">(</span><span class="n">GameInit</span><span class="o">.</span><span class="n">score</span><span class="p">),</span><span class="n">font</span><span class="p">,</span><span class="n">screen</span><span class="p">,</span><span class="mi">170</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>
    		<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    		<span class="n">GameInit</span><span class="o">.</span><span class="n">waitForKeyPress</span><span class="p">()</span>
    		<span class="k">break</span>
</code></pre></div> <h2 id="总结">总结</h2> <ul> <li> <p>1.我用的版本是python3.5,不知道为什么无法导入音乐，提示我打不开音乐文件，目前还没试过其它版本，猜测是否是因为版本的原因</p> </li> <li> <p>2.接下来修复bug,目前完成了基本功能，下一步加入敌机爆炸效果和大型敌机是需要好几发子弹才能击毁</p> </li> </ul> </div> </article> <footer class="site-footer"> <div class="container"> <ul class="social"> <li><a href="http://github.com/answershuto" target="_blank"><i class="icon icon-github"></i></a></li> </ul> <p> <br><small>&copy;2017 CaoYang , All rights reserved.</small> </p> </div> </footer> </main> <script src="/assets/js/jquery-2.1.1.js"></script> <script src="/assets/js/main.js"></script> </body> </html><!-- by nandomoreira.me -->